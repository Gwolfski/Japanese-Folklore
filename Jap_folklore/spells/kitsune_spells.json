[
  {
    "id": "create_foxflame",
    "type": "SPELL",
    "name": "Foxspark",
    "description": "Summons a small mote of foxfire which feels warm to the touch.  It seems to need you to have some intent to light things on fire, because you are able to put it in your pocket with no issue.",
    "valid_targets": [ "none" ],
    "flags": [ "NO_LEGS", "NO_HANDS" ],
    "effect": "spawn_item",
    "effect_str": "finger_firelighter",
    "shape": "blast",
    "min_damage": 1,
    "max_damage": 1,
    "min_duration": 6000,
    "max_duration": 60000,
    "duration_increment": 5400,
    "max_level": 10,
    "spell_class": "THRESH_FOX",
    "energy_source": "MANA",
    "base_casting_time": 250,
    "final_casting_time": 50,
    "casting_time_increment": -20.0,
    "base_energy_cost": 65,
    "difficulty": 0
  },
  {
    "id": "kitsune_glamor_minor",
    "type": "SPELL",
    "name": "Kitsune's Glamor",
    "description": "While not quite a proper transformation, you're able to cast a magical glamor that causes others to ignore some of your inhuman traits. You can maintain this glamor for as long as you have the mana to do so.",
    "valid_targets": [ "self" ],
    "flags": [ "CONCENTRATE", "NO_HANDS", "NO_LEGS" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_MINOR_GLAMOR_INITIATE",
    "shape": "blast",
    "energy_source": "MANA",
    "spell_class": "THRESH_FOX",
    "difficulty": 3,
    "max_level": 15,
    "base_casting_time": { "math": [ "u_has_trait('MINOR_GLAMOR') ? 0 : 6000" ] },
    "base_energy_cost": { "math": [ "u_has_trait('MINOR_GLAMOR') ? 0 : 200" ] },
    "min_duration": { "math": [ "((u_spell_level('kitsune_glamor_minor')+1)*200)*100" ] },
    "max_duration": { "math": [ "((u_spell_level('kitsune_glamor_minor')+1)*200)*100" ] },
	"learn_spells": { "kitsune_glamor_major": 10 }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MINOR_GLAMOR_INITIATE",
    "condition": { "not": { "u_has_trait": "MINOR_GLAMOR" } },
    "effect": [
      { "u_message": "You are concealed by glamor, and others turn an eye to your oddities.", "type": "good" },
      { "u_add_trait": "MINOR_GLAMOR" },
      { "queue_eocs": "EOC_MINOR_GLAMOR_CONTINUE", "time_in_future": { 
		"math": [ "((u_spell_level('kitsune_glamor_minor')+1)*200)" ] } 
	  }
    ],
    "false_effect": [
	  { "u_lose_trait": "MINOR_GLAMOR" },
      { "u_message": "You feel your magical facade fade.", "type": "neutral" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MINOR_GLAMOR_CONTINUE",
    "condition": { "and": [ { "u_has_trait": "MINOR_GLAMOR" }, { "math": [ "u_val('mana')", ">=", "200" ] } ] },
    "effect": [
      { "math": [ "u_val('mana')", "-=", "200" ] },
      {
        "u_message": "You feel the ebb and flow of your illusion.",
        "type": "good"
      },
      {
        "queue_eocs": "EOC_MINOR_GLAMOR_CONTINUE",
        "time_in_future": { "math": [ "((u_spell_level('kitsune_glamor_minor')+1)*200)" ] }
      },
	  {
		"if": { "math": [ "u_spell_level('kitsune_glamor_minor')", "<=", "15" ] },
		"then": {
			"math": [ "u_spell_exp('kitsune_glamor_minor')", "+=", "spell_exp_diff(u_spell_level('kitsune_glamor_minor'))/spell_train_factor(200)" ]
		}
	  }
    ],
    "false_effect": [
      { "u_lose_trait": "MINOR_GLAMOR" },
      { "u_message": "You feel your magical facade fade.", "type": "neutral" }
    ]
  },
  {
    "id": "kitsune_glamor_major",
    "type": "SPELL",
    "name": "Kitsune's Transformation",
    "description": "An evolution of your glamor magic, you're able to fully transform your body into that of a human's. You doubt this magic will work on any non-kitsune anatomy, however. You can maintain this transformation for as long as you like, but the cost increases with every transformed part.",
    "valid_targets": [ "self" ],
    "flags": [ "CONCENTRATE", "NO_HANDS", "NO_LEGS" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_INITIATE_MAJOR_GLAMOR",
    "shape": "blast",
    "energy_source": "MANA",
    "spell_class": "THRESH_FOX",
    "difficulty": 10,
    "max_level": 20,
    "base_casting_time": { "math": [ "u_has_trait('MAJOR_GLAMOR') ? 0 : 6000" ] },
    "base_energy_cost": { "math": [ "u_has_trait('MAJOR_GLAMOR') ? 0 : 200" ] },
    "min_duration": { "math": [ "((u_spell_level('kitsune_glamor_major')+1)*200)*100" ] },
    "max_duration": { "math": [ "((u_spell_level('kitsune_glamor_major')+1)*200)*100" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_INITIATE_MAJOR_GLAMOR",
    "condition": { "not": { "u_has_trait": "MAJOR_GLAMOR" } },
    "effect": [
      { "u_message": "You focus your magic throughout your body.", "type": "good" },
      { "u_add_trait": "MAJOR_GLAMOR" },
      { "queue_eocs": "EOC_MAJOR_GLAMOR_CONTINUE", "time_in_future": { 
		"math": [ "((u_spell_level('kitsune_glamor_major')+1)*200)" ] } 
	  },
	  { "queue_eocs": "EOC_APPLY_MAJOR_GLAMOR" }
    ],
    "false_effect": [
	  { "u_lose_trait": "MAJOR_GLAMOR" },
      { "u_message": "You feel your magical facade fade.", "type": "neutral" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MAJOR_GLAMOR_CONTINUE",
    "condition": { "and": [ { "u_has_trait": "MAJOR_GLAMOR" }, { "math": [ "u_val('mana')", ">=", "200" ] } ] },
    "effect": [
      { "math": [ "u_val('mana')", "-=", "200/(u_spell_level('kitsune_glamor_major')+1)" ] },
	  { "if": { "math": [ "u_val('mana')", "<=", "500" ] },
		"then": { "u_message": "It's becoming difficult to maintain your transformation magic" } },
	  { "queue_eocs": "EOC_GLAMOR_UPKEEP1" },
	  { "queue_eocs": "EOC_GLAMOR_UPKEEP2" },
	  { "queue_eocs": "EOC_GLAMOR_UPKEEP3" },
	  { "queue_eocs": "EOC_GLAMOR_UPKEEP4" },
	  { "queue_eocs": "EOC_GLAMOR_UPKEEP5" },
      {
        "queue_eocs": "EOC_MAJOR_GLAMOR_CONTINUE",
        "time_in_future": { "math": [ "((u_spell_level('kitsune_glamor_minor')+1)*200)" ] }
      },
	  {
		"if": { "math": [ "u_spell_level('kitsune_glamor_major')", "<=", "20" ] },
		"then": {
			"math": [ "u_spell_exp('kitsune_glamor_major')", "+=", "spell_exp_diff(u_spell_level('kitsune_glamor_major'))/spell_train_factor(400)" ]
			}
	  }
    ],
    "false_effect": [
      { "u_lose_trait": "MAJOR_GLAMOR" },
	  { "queue_eocs": "EOC_REMOVE_MAJOR_GLAMOR1" },
	  { "queue_eocs": "EOC_REMOVE_MAJOR_GLAMOR2" },
	  { "queue_eocs": "EOC_REMOVE_MAJOR_GLAMOR3" },
	  { "queue_eocs": "EOC_REMOVE_MAJOR_GLAMOR4" },
	  { "queue_eocs": "EOC_REMOVE_MAJOR_GLAMOR5" },
      { "u_message": "You feel the magical potential fade from your body.", "type": "neutral" }
    ]
  },
  {
	"type": "effect_on_condition",
	"id": "EOC_GLAMOR_UPKEEP1",
	"condition": { "u_has_trait": "HIDDEN_FUR" },
	"effect": [ { "math": [ "u_val('mana')", "-=", "100/((u_spell_level('kitsune_glamor_major')+2)*0.5)" ] } ]
  },
  {
	"type": "effect_on_condition",
	"id": "EOC_GLAMOR_UPKEEP2",
	"condition": { "u_has_trait": "HIDDEN_MUZZLE" },
	"effect": [ { "math": [ "u_val('mana')", "-=", "100/((u_spell_level('kitsune_glamor_major')+2)*0.5)" ] } ]
  },
  {
	"type": "effect_on_condition",
	"id": "EOC_GLAMOR_UPKEEP3",
	"condition": { "u_has_trait": "HIDDEN_EARS" },
	"effect": [ { "math": [ "u_val('mana')", "-=", "100/((u_spell_level('kitsune_glamor_major')+2)*0.5)" ] } ]
  },
  {
	"type": "effect_on_condition",
	"id": "EOC_GLAMOR_UPKEEP4",
	"condition": { "u_has_trait": "HIDDEN_PAWS" },
	"effect": [ { "math": [ "u_val('mana')", "-=", "100/((u_spell_level('kitsune_glamor_major')+2)*0.5)" ] } ]
  },
  {
	"type": "effect_on_condition",
	"id": "EOC_GLAMOR_UPKEEP5",
	"condition": { "u_has_trait": "HIDDEN_FEET" },
	"effect": [ { "math": [ "u_val('mana')", "-=", "100/((u_spell_level('kitsune_glamor_major')+2)*0.5)" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_APPLY_MAJOR_GLAMOR",
    "effect": [
      { "queue_eocs": "EOC_APPLY_MAJOR_GLAMOR1" },
	  { "queue_eocs": "EOC_APPLY_MAJOR_GLAMOR2" },
	  { "queue_eocs": "EOC_APPLY_MAJOR_GLAMOR3" },
	  { "queue_eocs": "EOC_APPLY_MAJOR_GLAMOR4" },
	  { "queue_eocs": "EOC_APPLY_MAJOR_GLAMOR5" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_APPLY_MAJOR_GLAMOR1",
	"condition": { "u_has_trait": "KITSUNE_FUR" },
    "effect": [ 
		{ "u_add_trait": "GLAM_FUR" },
		{ "u_lose_trait": "KITSUNE_FUR" },
		{ "u_message": "Your fur glimmers with transformative potential.", "type": "good" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_APPLY_MAJOR_GLAMOR2",
	"condition": { "u_has_trait": "FOX_MUZZLE" },
    "effect": [ 
		{ "u_add_trait": "GLAM_MUZZLE" },
		{ "u_lose_trait": "FOX_MUZZLE" },
		{ "u_message": "Your muzzle glimmers with transformative potential.", "type": "good" } 
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_APPLY_MAJOR_GLAMOR3",
	"condition": { "u_has_trait": "FOX_EARS" },
    "effect": [ 
		{ "u_add_trait": "GLAM_EARS" },
		{ "u_lose_trait": "FOX_EARS" },
		{ "u_message": "Your ears glimmer with transformative potential.", "type": "good" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_APPLY_MAJOR_GLAMOR4",
	"condition": { "u_has_trait": "PAWS" },
    "effect": [ 
		{ "u_add_trait": "GLAM_PAWS" },
		{ "u_message": "Your paws glimmer with transformative potential.", "type": "good" } 
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_APPLY_MAJOR_GLAMOR5",
	"condition": { "u_has_trait": "ANIMAL_FEET" },
    "effect": [ 
		{ "u_add_trait": "GLAM_FEET" },
		{ "u_message": "Your legs glimmer with transformative potential.", "type": "good" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REMOVE_MAJOR_GLAMOR1",
	"condition": { "or": [ { "u_has_trait": "GLAM_FUR" }, { "u_has_trait": "HIDDEN_FUR" } ] },
	"effect": [
		{ "u_add_trait": "KITSUNE_FUR" },
		{ "u_lose_trait": "GLAM_FUR" },
		{ "u_lose_trait": "HIDDEN_FUR" },
		{ "u_message": "You feel your transformative magic fade from your skin.", "type": "neutral" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REMOVE_MAJOR_GLAMOR2",
	"condition": { "or": [ { "u_has_trait": "GLAM_MUZZLE" }, { "u_has_trait": "HIDDEN_MUZZLE" } ] },
    "effect": [ 
		{ "u_add_trait": "FOX_MUZZLE" },
		{ "u_lose_trait": "GLAM_MUZZLE" },
		{ "u_lose_trait": "HIDDEN_MUZZLE" },
		{ "u_message": "You feel your transformative magic fade from your face.", "type": "neutral" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REMOVE_MAJOR_GLAMOR3",
	"condition": { "or": [ { "u_has_trait": "GLAM_EARS" }, { "u_has_trait": "HIDDEN_EARS" } ] },
    "effect": [ 
		{ "u_add_trait": "FOX_EARS" },
		{ "u_lose_trait": "GLAM_EARS" },
		{ "u_lose_trait": "HIDDEN_EARS" },
		{ "u_message": "You feel your transformative magic fade from your ears.", "type": "neutral" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REMOVE_MAJOR_GLAMOR4",
	"condition": { "or": [ { "u_has_trait": "GLAM_PAWS" }, { "u_has_trait": "HIDDEN_PAWS" } ] },
    "effect": [ 
		{ "u_add_trait": "PAWS" },
		{ "u_lose_trait": "GLAM_PAWS" },
		{ "u_lose_trait": "HIDDEN_PAWS" },
		{ "u_message": "You feel your transformative magic fade from your paws.", "type": "neutral" }
	]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REMOVE_MAJOR_GLAMOR5",
	"condition": { "or": [ { "u_has_trait": "GLAM_FEET" }, { "u_has_trait": "HIDDEN_FEET" } ] },
    "effect": [ 
		{ "u_add_trait": "ANIMAL_FEET" },
		{ "u_lose_trait": "GLAM_FEET" },
		{ "u_lose_trait": "HIDDEN_FEET" },
		{ "u_message": "You feel your transformative magic fade from your legs.", "type": "neutral" }
	]
  },
  {
    "id": "kitsune_cultivation",
    "type": "SPELL",
    "name": "Cultivate Pearl",
    "description": "Devote a large portion of your mana toward cultivating a star pearl. The process will take a long time, and your mana generation will be greatly reduced. Recasting this spell will cancel the process.",
    "valid_targets": [ "self" ],
    "flags": [ "CONCENTRATE", "NO_HANDS", "NO_LEGS" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_CULTIVATE_INITIATE",
    "shape": "blast",
    "energy_source": "MANA",
    "spell_class": "TRUE_KITSUNE",
    "difficulty": 3,
    "max_level": 0,
    "base_casting_time": 100,
    "base_energy_cost": 0,
	"//": "Should take 5 days to complete",
    "min_duration": 43200000,
    "max_duration": 43200000
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_CULTIVATE_INITIATE",
	"condition": { "not": { "u_has_trait": "KITSUNE_CULTIVATING" } },
    "effect": [ 
		{ "u_add_trait": "KITSUNE_CULTIVATING" },
		{ "u_message": "You focus your mana internally, condensing it into a physical form.", "type": "neutral" },
		{ "queue_eocs": "EOC_CULTIVATE_CONTINUE", "time_in_future": "1 h" },
		{ "math": [ "cultivation_progress", "=", "0" ] }
	],
	"//": "Next EOC queues every hour",
	"false_effect": [ { "u_lose_trait": "KITSUNE_CULTIVATING" }, { "math": [ "cultivation_progress", "=", "0" ] } ] 
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_CULTIVATE_CONTINUE",
	"condition": { "u_has_trait": "KITSUNE_CULTIVATING" },
    "effect": [ 
		{ "if": { "math": [ "cultivation_progress", ">=", "120" ] },
		  "then": [ 
			{ "u_spawn_item": "star_pearl" },
			{ "u_lose_trait": "KITSUNE_CULTIVATING" },
			{ "u_message": "You finish your pearl cultivation!", "type": "good" }
		  ],
		  "else": [
		    { "math": [ "cultivation_progress", "+=", "1" ] },
			{ "queue_eocs": "EOC_CULTIVATE_CONTINUE", "time_in_future": "1 h" }
		  ]
		}
	],
	"//": "Next EOC queues every hour"
  },
  {
    "id": "summon_foxfire",
    "type": "SPELL",
    "name": "Foxfire",
    "description": "Summons ghostly foxfire worked from living marsh vapor to lead your enemies astray.  With more experience, this spell can conjure multiple ghost lights.",
    "valid_targets": [ "ground" ],
    "effect": "summon",
    "effect_str": "mon_foxfire",
    "shape": "blast",
    "flags": [ "LOUD", "NO_HANDS" ],
    "spell_class": "NONE",
    "energy_source": "MANA",
    "difficulty": 2,
    "base_casting_time": 250,
    "base_energy_cost": 300,
    "max_level": 16,
    "min_damage": 2,
    "max_damage": 10,
    "damage_increment": 0.5,
    "min_aoe": 3,
    "max_aoe": 3,
    "min_range": 3,
    "max_range": 7,
    "range_increment": 0.25,
    "min_duration": 6000,
    "max_duration": 60000,
    "duration_increment": 2160
  },
  {
    "id": "kitsune_firebolt",
    "type": "SPELL",
    "name": "Firebolt",
    "description": "You launch a bolt of flame that blooms beautifully briefly when it lands",
    "effect": "attack",
    "shape": "blast",
    "valid_targets": [ "self", "ally", "hostile", "ground" ],
    "flags": [ "VERBAL", "NO_LEGS", "NO_HANDS" ],
    "spell_class": "NONE",
    "max_level": 9,
    "min_damage": 12,
    "max_damage": 30,
    "damage_increment": 1.5,
    "min_aoe": 1,
    "max_aoe": 2,
    "aoe_increment": 0.1,
    "min_range": 3,
    "max_range": 15,
    "range_increment": 1.2,
    "base_casting_time": 150,
    "base_energy_cost": 300,
    "energy_source": "MANA",
    "difficulty": 3,
    "damage_type": "heat"
  },
  {
    "id": "kitsune_escape",
    "type": "SPELL",
    "name": "Escape",
    "description": "Teleports you in a random direction a medium distance, to help escape your foes in dangerous situations.",
    "effect": "summon",
    "shape": "blast",
    "effect_str": "mon_mirror_image",
	"valid_targets": [ "self" ],
	"extra_effects": [
		{ "id": "kitsune_poof", "hit_self": true }
	],
    "energy_source": "MANA",
    "difficulty": 5,
    "max_level": 20,
	"min_damage": 1,
    "final_casting_time": 130,
    "base_energy_cost": 200,
    "energy_increment": -2.0,
    "final_energy_cost": 160,
    "min_aoe": 4,
    "min_duration": 3000,
    "max_duration": 6000,
    "duration_increment": 200
  },
  {
	"id": "summon_foxfire2",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_TWOTAIL"
  },
  {
	"id": "summon_foxfire3",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_THREETAIL"
  },
  {
	"id": "summon_foxfire4",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_FOURTAIL"
  },
  {
	"id": "summon_foxfire5",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_FIVETAIL"
  },
  {
	"id": "summon_foxfire6",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_SIXTAIL"
  },
  {
	"id": "summon_foxfire7",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_SEVENTAIL"
  },
  {
	"id": "summon_foxfire8",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_EIGHTTAIL"
  },
  {
	"id": "summon_foxfire9",
	"type": "SPELL",
	"name": "Foxfire",
	"copy-from": "summon_foxfire",
	"spell_class": "FOX_NINETAIL"
  },
  {
	"id": "kitsune_firebolt4",
	"type": "SPELL",
	"name": "Firebolt",
	"copy-from": "kitsune_firebolt",
	"spell_class": "FOX_FOURTAIL"
  },
  {
	"id": "kitsune_firebolt5",
	"type": "SPELL",
	"name": "Firebolt",
	"copy-from": "kitsune_firebolt",
	"spell_class": "FOX_FIVETAIL"
  },
  {
	"id": "kitsune_firebolt6",
	"type": "SPELL",
	"name": "Firebolt",
	"copy-from": "kitsune_firebolt",
	"spell_class": "FOX_SIXTAIL"
  },
  {
	"id": "kitsune_firebolt7",
	"type": "SPELL",
	"name": "Firebolt",
	"copy-from": "kitsune_firebolt",
	"spell_class": "FOX_SEVENTAIL"
  },
  {
	"id": "kitsune_firebolt8",
	"type": "SPELL",
	"name": "Firebolt",
	"copy-from": "kitsune_firebolt",
	"spell_class": "FOX_EIGHTTAIL"
  },
  {
	"id": "kitsune_firebolt9",
	"type": "SPELL",
	"name": "Firebolt",
	"copy-from": "kitsune_firebolt",
	"spell_class": "FOX_NINETAIL"
  },
  {
	"id": "kitsune_escape6",
	"type": "SPELL",
	"name": "Escape",
	"copy-from": "kitsune_escape",
	"spell_class": "FOX_SIXTAIL"
  },
  {
	"id": "kitsune_escape7",
	"type": "SPELL",
	"name": "Escape",
	"copy-from": "kitsune_escape",
	"spell_class": "FOX_SEVENTAIL"
  },
  {
	"id": "kitsune_escape8",
	"type": "SPELL",
	"name": "Escape",
	"copy-from": "kitsune_escape",
	"spell_class": "FOX_EIGHTTAIL"
  },
  {
	"id": "kitsune_escape9",
	"type": "SPELL",
	"name": "Escape",
	"copy-from": "kitsune_escape",
	"spell_class": "FOX_NINETAIL"
  },
  {
    "id": "kitsune_poof",
    "type": "SPELL",
    "name": "K-Poof",
	"//": "This is a spell sub effect",
    "description": "Teleports you in a random direction a medium distance, to help escape your foes in dangerous situations.",
	"valid_targets": [ "self" ],
    "effect": "short_range_teleport",
    "shape": "blast",
    "flags": [ "SILENT", "NO_LEGS", "VERBAL" ],
    "min_aoe": 5,
    "max_aoe": 10,
    "aoe_increment": 0.25,
    "min_range": 25,
    "max_range": 35,
    "range_increment": 0.5,
    "max_level": 20,
    "difficulty": 5
  },
  {
    "id": "kitsune_image",
    "type": "SPELL",
    "name": "K-Image",
	"//": "This is a spell sub effect",
    "description": "This spell manipulates light into barely tangible duplicates of a living being, a magical hologram in short.",
    "valid_targets": [ "ground" ],
    "flags": [ "VERBAL", "CONCENTRATE" ],
    "effect": "summon",
    "shape": "blast",
    "effect_str": "mon_mirror_image",
    "energy_source": "MANA",
    "difficulty": 5,
    "max_level": 20,
    "final_casting_time": 130,
    "base_energy_cost": 200,
    "energy_increment": -2.0,
    "final_energy_cost": 160,
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 1,
    "max_range": 1,
    "min_aoe": 3,
    "max_aoe": 3,
    "min_duration": 3000,
    "max_duration": 6000,
    "duration_increment": 200
  },
  {
    "id": "mon_kitsune_escape",
    "type": "SPELL",
    "name": "Escape",
    "description": "Teleports you in a random direction a medium distance, to help escape your foes in dangerous situations.",
    "effect": "none",
    "shape": "blast",
    "extra_effects": [
      { "id": "mon_kitsune_image" },
      { "id": "mon_kitsune_poof", "hit_self": true }
    ],
    "valid_targets": [ "self" ],
    "flags": [ "SILENT", "NO_LEGS", "VERBAL", "WONDER" ],
    "min_damage": 2,
    "max_damage": 2,
    "max_level": 20,
    "difficulty": 5,
    "base_casting_time": 100,
    "energy_source": "MANA",
    "base_energy_cost": 250
  },
  {
    "id": "mon_kitsune_poof",
    "type": "SPELL",
    "name": "Escape",
    "description": "Teleports you in a random direction a medium distance, to help escape your foes in dangerous situations.",
    "effect": "short_range_teleport",
    "shape": "blast",
    "valid_targets": [ "self" ],
    "flags": [ "SILENT", "NO_LEGS", "VERBAL" ],
    "min_aoe": 5,
    "max_aoe": 10,
    "aoe_increment": 0.25,
    "min_range": 25,
    "max_range": 35,
    "range_increment": 0.5,
    "max_level": 20,
    "difficulty": 5
  },
  {
    "id": "mon_kitsune_image",
    "type": "SPELL",
    "name": "Mirror Image",
    "description": "This spell manipulates light into barely tangible duplicates of a living being, a magical hologram in short.",
    "valid_targets": [ "ground" ],
    "flags": [ "VERBAL", "CONCENTRATE" ],
    "effect": "summon",
    "shape": "blast",
    "effect_str": "mon_kitsune_illusion",
    "spell_class": "TECHNOMANCER",
    "energy_source": "MANA",
    "difficulty": 5,
    "max_level": 20,
    "final_casting_time": 130,
    "base_energy_cost": 200,
    "energy_increment": -2.0,
    "final_energy_cost": 160,
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 1,
    "max_range": 1,
    "min_aoe": 3,
    "max_aoe": 3,
    "min_duration": 3000,
    "max_duration": 6000,
    "duration_increment": 200
  },
  {
    "id": "summon_foxes",
    "type": "SPELL",
    "name": { "str": "Summon \"Cuteness\"" },
    "description": "Apparently \"Makes the world an objectively better place\"",
    "valid_targets": [ "ground" ],
    "flags": [ "SOMATIC", "SPAWN_GROUP" ],
    "min_damage": 1,
    "max_damage": 8,
    "damage_increment": 0.5,
    "min_range": 3,
    "range_increment": 0.8,
    "max_range": 7,
    "min_aoe": 3,
    "max_aoe": 3,
    "spell_class": "DRUID",
    "base_casting_time": 250,
    "energy_source": "MANA",
    "max_level": 25,
    "min_duration": 6000,
    "max_duration": 60000,
    "duration_increment": 1000,
    "difficulty": 1,
    "base_energy_cost": 270,
    "effect": "summon",
    "effect_str": "GROUP_MFOX",
    "shape": "blast"
  },
  {
    "type": "effect_type",
    "id": "lullaby",
    "name": [ "Lullaby" ],
    "apply_message": "You feel calm and sleepy, an ethereal tune ringing in your ears.",
    "base_mods": {
      "sleep_chance": [ 90 ],
      "sleep_min": [ 15000 ],
      "sleep_max": [ 35000 ]
    }
  },
  {
    "id": "self_sleep",
    "type": "SPELL",
    "name": "Lullaby",
    "description": "A spell to help sleep",
    "valid_targets": [ "self" ],
    "spell_class": "NONE",
    "min_duration": 500,
    "max_duration": 500,
    "max_level": 1,
    "energy_source": "MANA",
    "base_energy_cost": 100,
    "base_casting_time": 100,
    "difficulty": 6,
    "flags": [ "VERBAL" ],
    "effect": "attack",
    "effect_str": "lullaby",
    "shape": "blast"
  }
]